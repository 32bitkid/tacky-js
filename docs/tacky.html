<!DOCTYPE html>

<html>
<head>
  <title>tacky.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>tacky.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="base-setup">Base setup</h2>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Establish the root object, <code>window</code> in the browser, or <code>exports</code> on the server.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> root = <span class="hljs-keyword">this</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Create the tacky object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      tacky = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Export the tacky object for <strong>Node.js</strong>, with
backwards-compatibility for the old <code>require()</code> API. If we’re in
the browser, add <code>_</code> as a global object via a string identifier,
for Closure Compiler “advanced” mode.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> exports !== <span class="hljs-string">'undefined'</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> module !== <span class="hljs-string">'undefined'</span> &amp;&amp; module.exports) {
      exports = module.exports = tacky;
    }
    exports.tacky = tacky;
  } <span class="hljs-keyword">else</span> {
    root.tacky = tacky;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>A list of HTML5 element names.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> elements =[<span class="hljs-string">"a"</span>,<span class="hljs-string">"abbr"</span>,<span class="hljs-string">"address"</span>,<span class="hljs-string">"area"</span>,<span class="hljs-string">"article"</span>,<span class="hljs-string">"aside"</span>,<span class="hljs-string">"audio"</span>,<span class="hljs-string">"b"</span>,<span class="hljs-string">"base"</span>,<span class="hljs-string">"bdi"</span>,<span class="hljs-string">"bdo"</span>,<span class="hljs-string">"blockquote"</span>,<span class="hljs-string">"body"</span>,<span class="hljs-string">"br"</span>,<span class="hljs-string">"button"</span>,<span class="hljs-string">"canvas"</span>,<span class="hljs-string">"caption"</span>,<span class="hljs-string">"cite"</span>,<span class="hljs-string">"code"</span>,<span class="hljs-string">"col"</span>,<span class="hljs-string">"colgroup"</span>,<span class="hljs-string">"content"</span>,<span class="hljs-string">"data"</span>,<span class="hljs-string">"datalist"</span>,<span class="hljs-string">"dd"</span>,<span class="hljs-string">"decorator"</span>,<span class="hljs-string">"del"</span>,<span class="hljs-string">"details"</span>,<span class="hljs-string">"dfn"</span>,<span class="hljs-string">"div"</span>,<span class="hljs-string">"dl"</span>,<span class="hljs-string">"dt"</span>,<span class="hljs-string">"element"</span>,<span class="hljs-string">"em"</span>,<span class="hljs-string">"embed"</span>,<span class="hljs-string">"fieldset"</span>,<span class="hljs-string">"figcaption"</span>,<span class="hljs-string">"figure"</span>,<span class="hljs-string">"footer"</span>,<span class="hljs-string">"form"</span>,<span class="hljs-string">"h1"</span>,<span class="hljs-string">"h2"</span>,<span class="hljs-string">"h3"</span>,<span class="hljs-string">"h4"</span>,<span class="hljs-string">"h5"</span>,<span class="hljs-string">"h6"</span>,<span class="hljs-string">"head"</span>,<span class="hljs-string">"header"</span>,<span class="hljs-string">"hr"</span>,<span class="hljs-string">"html"</span>,<span class="hljs-string">"i"</span>,<span class="hljs-string">"iframe"</span>,<span class="hljs-string">"img"</span>,<span class="hljs-string">"input"</span>,<span class="hljs-string">"ins"</span>,<span class="hljs-string">"kbd"</span>,<span class="hljs-string">"keygen"</span>,<span class="hljs-string">"label"</span>,<span class="hljs-string">"legend"</span>,<span class="hljs-string">"li"</span>,<span class="hljs-string">"link"</span>,<span class="hljs-string">"main"</span>,<span class="hljs-string">"map"</span>,<span class="hljs-string">"mark"</span>,<span class="hljs-string">"menu"</span>,<span class="hljs-string">"menuitem"</span>,<span class="hljs-string">"meta"</span>,<span class="hljs-string">"meter"</span>,<span class="hljs-string">"nav"</span>,<span class="hljs-string">"noscript"</span>,<span class="hljs-string">"object"</span>,<span class="hljs-string">"ol"</span>,<span class="hljs-string">"optgroup"</span>,<span class="hljs-string">"option"</span>,<span class="hljs-string">"output"</span>,<span class="hljs-string">"p"</span>,<span class="hljs-string">"param"</span>,<span class="hljs-string">"pre"</span>,<span class="hljs-string">"progress"</span>,<span class="hljs-string">"q"</span>,<span class="hljs-string">"rp"</span>,<span class="hljs-string">"rt"</span>,<span class="hljs-string">"ruby"</span>,<span class="hljs-string">"s"</span>,<span class="hljs-string">"samp"</span>,<span class="hljs-string">"script"</span>,<span class="hljs-string">"section"</span>,<span class="hljs-string">"select"</span>,<span class="hljs-string">"shadow"</span>,<span class="hljs-string">"small"</span>,<span class="hljs-string">"source"</span>,<span class="hljs-string">"span"</span>,<span class="hljs-string">"strong"</span>,<span class="hljs-string">"style"</span>,<span class="hljs-string">"sub"</span>,<span class="hljs-string">"summary"</span>,<span class="hljs-string">"sup"</span>,<span class="hljs-string">"table"</span>,<span class="hljs-string">"tbody"</span>,<span class="hljs-string">"td"</span>,<span class="hljs-string">"template"</span>,<span class="hljs-string">"textarea"</span>,<span class="hljs-string">"tfoot"</span>,<span class="hljs-string">"th"</span>,<span class="hljs-string">"thead"</span>,<span class="hljs-string">"time"</span>,<span class="hljs-string">"title"</span>,<span class="hljs-string">"tr"</span>,<span class="hljs-string">"track"</span>,<span class="hljs-string">"u"</span>,<span class="hljs-string">"ul"</span>,<span class="hljs-string">"var"</span>,<span class="hljs-string">"video"</span>,<span class="hljs-string">"wbr"</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Create quick references to prototypes that are used.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> funcProto = <span class="hljs-built_in">Function</span>.prototype,
      arrayProto = <span class="hljs-built_in">Array</span>.prototype,</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Create quick references to <code>Function</code> prototype methods that are used. </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      bind = funcProto.bind,
      call = funcProto.call,</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Create quick references to <code>Array</code> prototype methods that are used</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      reduce = arrayProto.reduce,
      slice = arrayProto.slice,
      map = arrayProto.map,
      filter = arrayProto.filter,
      forEach = arrayProto.forEach,</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Return <code>true</code> if the arugment is a function</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      isFunction = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fn)</span> {</span> <span class="hljs-keyword">return</span> fn &amp;&amp; fn.call == call; },</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p><a href="http://en.wikipedia.org/wiki/Partial_application">Partial application</a> implementation.
Partial applications are heavily used in this library, and </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      partial = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fn)</span> {</span>
        <span class="hljs-keyword">var</span> args = slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">1</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
          <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-keyword">this</span>, args.concat(slice.call(<span class="hljs-built_in">arguments</span>)));
        };
      },</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Create a <code>filter</code> that will remove all falsey values from an array.
For example:
    existsFilter.call([1,undefined,true,”Hello”,false]); // =&gt; [1,true,”Hello”]</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      existsFilter = partial(filter, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(val)</span> {</span> <span class="hljs-keyword">return</span> !!val; }),</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>This helper reduces the list of HTML5 elements into a single object. The <code>fn</code> arguments
is partially applied by each implementation: <code>browser</code> and <code>stringer</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      reducer = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(fn, DOM, tagName)</span> {</span> DOM[tagName] = partial(fn, tagName); <span class="hljs-keyword">return</span> DOM; };</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <h2 id="browser">Browser</h2>

            </div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>This implemenation will generate <em>actual</em> DOM elements in a browser.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  tacky.browser = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> <span class="hljs-comment">// Create a quick reference to the `Document` prototype</span>
        docProto = Document.prototype,</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Bind <code>createTextNode</code> to the current <code>document</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        createText = bind.call(docProto.createTextNode, document),</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Bind <code>createElement</code> to the current ‘document`</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        createElement = bind.call(docProto.createElement, document),</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Bind <code>createDocumentFragment</code> to the current <code>document</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        createFragment = bind.call(docProto.createDocumentFragment, document),</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>A helper function that will always return a <code>Node</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        toNodes = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(content)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>If the content is a function then it will be invoked.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span>(isFunction(content)) content = content.call(<span class="hljs-keyword">this</span>.ctx, <span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>If the content is falsey then return <code>undefined</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span>(!content) <span class="hljs-keyword">return</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>If the content is already a <code>Node</code> then just return it. </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span>(content <span class="hljs-keyword">instanceof</span> Node) <span class="hljs-keyword">return</span> content;</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Otherwise, covert the object into a string, and wrap it in a <code>TextNode</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">return</span> createText(content.toString());
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Append multi all <code>children</code> to <code>element</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        doAppend = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(element, children)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Bind <code>toNodes</code> to <code>this</code>. This is important for rendering templates
and to properly forward the context of the template</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">var</span> boundToNodes = bind.call(toNodes, <span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Create a <code>map</code> to convert children to into nodes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">var</span> mapToNodes = partial(map, boundToNodes);</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Bind <code>appendChild</code> to the current element.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">var</span> appendChildToElement = bind.call(Node.prototype.appendChild, element);</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Create a <code>forEach</code> that will append each child to the element.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">var</span> appender = partial(forEach, appendChildToElement);</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Convert the children into the nodes, filter down to children that actually exist,
and finally append them to the element.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          appender.call(existsFilter.call(mapToNodes.call(children)));
          
          <span class="hljs-keyword">return</span> element;
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Create a generator function for the <code>reducer</code>. This function
is used to generate a element of a specific type, and optionally
apply a collection of attributes to that element, and append also
zero or more children.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> generator = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(tagName, attrs)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Create the element of the desired tag name.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> element = createElement(tagName),</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Slice the remaining arguments as <code>children</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          children = slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">2</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Set the attributes on the element.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> attr <span class="hljs-keyword">in</span> attrs) {
        element.setAttribute(attr, attrs[attr]); 
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Append the children to the element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">return</span> doAppend.call(<span class="hljs-keyword">this</span>, element, children);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Partially apply our generator to the reducer.
Then create a <code>reduce</code> from the generic reducer.
Finally, call it with all of the elements we want
to generate helpers for, and with an empty object
to start.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> browser = partial(reduce, partial(reducer, generator)).call(elements, {});</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Create a fragment helper, for creating sibling elements without a parent element.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    browser.$frag = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span> 
      <span class="hljs-keyword">return</span> doAppend.call(<span class="hljs-keyword">this</span>, createFragment(), slice.call(<span class="hljs-built_in">arguments</span>));
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Return the fully constructed <code>browser</code> object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> browser;
  }());</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <h2 id="stringer">Stringer</h2>

            </div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>This implementation will generate HTML strings, for use when DOM elements are not available.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  tacky.stringer = (<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    
    <span class="hljs-keyword">var</span> <span class="hljs-comment">// This function should return HTML escaped strings   </span>
        esc = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(s)</span> {</span> <span class="hljs-keyword">return</span> s; },</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>A list of elements that are self closing — given they have no content.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        isSelfClosing = {
          <span class="hljs-string">"area"</span>:<span class="hljs-literal">true</span>, <span class="hljs-string">"base"</span>:<span class="hljs-literal">true</span>, <span class="hljs-string">"br"</span>:<span class="hljs-literal">true</span>, <span class="hljs-string">"col"</span>:<span class="hljs-literal">true</span>, <span class="hljs-string">"command"</span>:<span class="hljs-literal">true</span>,
          <span class="hljs-string">"embed"</span>:<span class="hljs-literal">true</span>, <span class="hljs-string">"hr"</span>:<span class="hljs-literal">true</span>, <span class="hljs-string">"img"</span>:<span class="hljs-literal">true</span>, <span class="hljs-string">"input"</span>:<span class="hljs-literal">true</span>, <span class="hljs-string">"link"</span>:<span class="hljs-literal">true</span>,
          <span class="hljs-string">"meta"</span>:<span class="hljs-literal">true</span>, <span class="hljs-string">"param"</span>:<span class="hljs-literal">true</span>, <span class="hljs-string">"source"</span>:<span class="hljs-literal">true</span>, <span class="hljs-string">"track"</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">"wbr"</span>:<span class="hljs-literal">true</span>    
        };</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Render all children into a string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> renderChildren = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(content)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>If the content is a function then invoke it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(isFunction(content)) content = content.call(<span class="hljs-keyword">this</span>.ctx, <span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>If the content is falsy, then return undefined</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(!content) <span class="hljs-keyword">return</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Return the content as a string.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">return</span> content.toString();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>Create a generator function for the <code>reducer</code>. This function
is used to generate a element of a specific type, and optionally
apply a collection of attributes to that element, and append also
zero or more children.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> generator = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(tagName, attrs)</span> {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Create a map to <code>renderChildren</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> boundRenderChildren = partial(map, bind.call(renderChildren, <span class="hljs-keyword">this</span>)),</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Slice <code>children</code> off of end of arguments and render each one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          children = boundRenderChildren.call(slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">2</span>)),</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Helpers for building the attributes part of the element</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          attrsArray = [], attrString = <span class="hljs-string">''</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Generate the attributes part </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> attrs) {
        attrsArray.push(esc(i)+<span class="hljs-string">"=\""</span>+esc(attrs[i])+<span class="hljs-string">"\""</span>);
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>If there are attributes, then join them together</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(attrsArray.length) attrString = <span class="hljs-string">" "</span>+attrsArray.join(<span class="hljs-string">" "</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Build the string version of the element and return it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;"</span>+tagName+attrString+<span class="hljs-string">"&gt;"</span> + 
        ((children.length || !isSelfClosing[tagName]) ?
         children.join(<span class="hljs-string">""</span>) +  <span class="hljs-string">"&lt;/"</span>+tagName +<span class="hljs-string">"&gt;"</span> : <span class="hljs-string">""</span>);  
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>Partially apply our generator to the reducer.
Then create a <code>reduce</code> from the generic reducer.
Finally, call it with all of the elements we want
to generate helpers for, and with an empty object
to start.    </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> stringer = partial(reduce, partial(reducer, generator)).call(elements, {});</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Create a fragment helper, for creating sibling elements without a parent element.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    stringer.$frag = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
      <span class="hljs-keyword">var</span> boundRenderChildren = partial(map, bind.call(renderChildren, <span class="hljs-keyword">this</span>));
      <span class="hljs-keyword">return</span> boundRenderChildren.call(slice.call(<span class="hljs-built_in">arguments</span>,<span class="hljs-number">0</span>)).join(<span class="hljs-string">""</span>);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>Return the fully constructed <code>stringer</code> object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> stringer;
  }());</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <h2 id="templating-">Templating </h2>

            </div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <blockquote>
<p>This is a work in progress…</p>
</blockquote>

            </div>
            
            <div class="content"><div class='highlight'><pre>  tacky.tmpl = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(browser, fn)</span> {</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">DerivedContext</span><span class="hljs-params">(ctx)</span> {</span> <span class="hljs-keyword">this</span>.ctx = ctx; }
    DerivedContext.prototype = browser;
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(ctx)</span> {</span>
      <span class="hljs-keyword">return</span> fn.call(ctx, <span class="hljs-keyword">new</span> DerivedContext(ctx));
    };
  };
}).call(<span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
